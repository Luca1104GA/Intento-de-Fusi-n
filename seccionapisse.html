<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Server Sent Events API</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="estilos.css">
    <link rel="stylesheet" href="style.css">
    <link href="data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAD29vYAMWv4ACAfIwD///8A87UAAADDkQAAw/8A/Pz8APX19QAsaPgAJiUpAP7+/gAhHyQAAMKQADw8PgBGRkkA8bQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDCwMDAwMDAwMDAwMDAwMDAwMCAgsDAwMDAwMDAwMDDgICAgICDwMDAwMCAwMDAgMQEBACBAICAgICAgMDAwMQEBAQAhAQEAIGBgIDAwMQBwMQEAIQEBACBgYCAwsDAwICAgICEBAQAgYGAgMLAwIDAQEBAgICAgICAgIDCwMDAQEBAQIJCQkCBQUCAwsDAQMDAQkCCQkJAgUFAgMLAwMCAgICCgkJCQIFBQIDCwMCAwMDDAICAgICDQUCAwsLAwMDAwMIAwICAgICAwsLCwMDAwMDAwMDCwAHAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="menuf">
        <ion-icon name="menu-outline"></ion-icon>
        <ion-icon name="close"></ion-icon>
    </div>

    <div class="barra-lateral">
        <div>
            <div class="nombre-pagina">
                <ion-icon name="alert-circle-outline"></ion-icon>
                <span>HTML SSE API!</span>
            </div>
            <button class="boton">
                <ion-icon id="cloud" name="add-outline"></ion-icon>
                <span>Indice</span>
            </button>
        </div>

        <nav class="navegacion">
            <ul>
                <!-- -------------------------------------------  Back to Home  --------------------------------------------------------->
                <li class="home">
                    <a href="indexfinal.html">
                        <ion-icon name="home-outline"></ion-icon>
                        <span>Home</span>
                    </a>
                </li>
                <hr style="margin-left: -40px;">
                <li class="home">
                    <a href="seccionapis.html">
                        <ion-icon name="location"></ion-icon>
                        <span>Geolocation</span>
                    </a>
                </li>
                <li class="home">
                    <a href="seccionapiarrastrarysoltar.html">
                        <ion-icon name="download"></ion-icon>
                        <span>Arrastrar/Soltar</span>
                    </a>
                </li>
                <li class="home">
                    <a href="seccionapiwebstorage.html">
                        <ion-icon name="cloud-upload"></ion-icon>
                        <span>Web Storage</span>
                    </a>
                </li>
                <li class="home">
                    <a href="seccionapiwebworkers.html">
                        <ion-icon name="timer"></ion-icon>
                        <span>Web Workers</span>
                    </a>
                </li>
                <hr style="margin-left: -40px;">

                <!-- -------------------------------------------  Inicio  ---------------------------------------------------------------->
                <li class="titulo">
                    <ion-icon name="alert-circle"></ion-icon>
                        <span>Server-Sent Events</span>
                </li>
                <li>
                    <a href="#añ2">
                        <ion-icon name="chevron-forward-circle"></ion-icon>
                        <span>Sent-Event</span>
                    </a>
                </li>
                <li>
                    <a href="#añ3">
                        <ion-icon name="chevron-forward-circle"></ion-icon>
                        <span>Soporte del nav...</span>
                    </a>
                </li>
                <li>
                    <a href="#añ4">
                        <ion-icon name="chevron-forward-circle"></ion-icon>
                        <span>EventSource</span>
                    </a>
                </li>
                <li>
                    <a href="#añ5">
                        <ion-icon name="chevron-forward-circle"></ion-icon>
                        <span>Ejemplo de código</span>
                    </a>
                </li>
                <li>
                    <a href="#añ6">
                        <ion-icon name="chevron-forward-circle"></ion-icon>
                        <span>EventSource</span>
                    </a>
                </li>
                <!-- <li class="titulo">
                    <ion-icon name="school-outline"></ion-icon>
                        <span>Nombre del Titulo</span>
                </li> -->
                <!-- <li>
                    <a href="#">
                        <ion-icon name="chevron-forward-circle"></ion-icon>
                        <span>Link</span>
                    </a>
                </li> -->
            </ul>
        </nav>

        <div>
            <div class="linea"></div>

        <div class="modo-oscuro">
            <div class="info">
                <ion-icon name="moon-outline"></ion-icon>
                <span>Dark Mode</span>
            </div>
            <div class="switch">
                <div class="base">
                    <div class="circulo">
                        
                    </div>
                </div>
            </div>
        </div>

        <div class="usuario">
            <img src="usuario.png" alt="usuario">
            <div class="info-usuario">
                <div class="nombre-email">
                    <span class="nombre">Luca</span>
                    <span class="email">almadaluca1104@gmail.com</span>
                </div>
                <ion-icon name="ellipsis-vertical-outline"></ion-icon>
            </div>
        </div>
        </div>

    </div>
    
    <main>

        <button id="botonIrAbajo">Ir al Final</button>
        <button id="botonVolverArriba">Volver al inicio</button>

        <div class="Estilo_blanco3" id="añ1">

            <h1>HTML SSE API</h1>
            <p>
                <i>Server-Sent Events</i>(SSE)<br> Los eventos enviados por el servidor permiten que una página web obtenga
                actualizaciones de un servidor.
            </p>
            <hr>

            <h2 title="Server-Sent Events - One Way Messaging" id="añ2">Eventos enviados por el servidor: mensajería unidireccional</h2>
            <p>
                Un <i>Evento enviado por el servidor</i> es cuando una página web recibe automáticamente actualizaciones de un
                servidor.<br><br>
                Esto también era posible antes, pero la página web tendria que preguntar si había actualizaciones disponibles. <br>
                Con los <i>eventos enviados por el servidor</i> las actualizaciones se realizan automáticamente. <br><br>
                Ejemplos: actualizaciones de Facebook/Twitter, actualizaciones de precios de acciones, fuentes de noticias,
                resultados deportivos, etc.
            </p>
            <hr>

            <h3 id="añ3">Soporte del navegador</h3>

            <p>
                Los números de la tabla especifican la primera versión del navegador que admite <i>Eventos enviados por el servidor</i>.
            </p>

            <table class="tablecebra4blanco">
                <tbody>
                    <tr class="w3-blue-grey">
                        <th>API</th>
                        <th><img src="imagenes/chrome.png" alt="Chrome" title="Chrome"></th>
                        <th><img src="imagenes/compatible_edge.png" alt="Internet Explorer / Edge" title="Edge"></th>
                        <th><img src="imagenes/compatible_firefox.png" alt="Firefox" title="Firefox"></th>
                        <th><img src="imagenes/compatible_safari.png" alt="Safari" title="Safari"></th>
                        <th><img src="imagenes/compatible_opera.png" alt="Opera" title="Opera"></th>
                    </tr>
                    <tr class="w3-pale-green">
                        <td><code class="tag">SSE</code></td>
                        <td>6.0</td>
                        <td>79.0</td>
                        <td>6.0</td>
                        <td>5.0</td>
                        <td>11.5</td>
                    </tr>
                </tbody>
            </table>
            <hr>

            <h2 title="Receive Server-Sent Event Notifications" id="añ4">Recibir notificaciones de eventos enviadas por el servidor</h2>
            <p> El objeto <code>EventSource</code> se utiliza para recibir notificaciones de eventos enviadas por el servidor:</p>

            <article class="ejemplo">
                <h4>Ejemplo</h4>

                <h1 style="text-align: center;">Getting server updates</h1>
                <div id="result"></div>

                <div class="w3-code notranslate jsHigh">
                    <span class="jscolor" style="color:black"><span class="jsnumbercolor" style="color:red">
                        </span> <span class="jskeywordcolor" style="color:mediumblue">var</span> source = <span class="jskeywordcolor"
                            style="color:mediumblue">new</span> EventSource(<span class="jsstringcolor"
                            style="color:brown">"demo_sse.php"</span>);<br>source.<span class="jspropertycolor"
                            style="color:black">onmessage</span> = <span class="jskeywordcolor"
                            style="color:mediumblue">function</span>(<span class="jskeywordcolor" style="color:mediumblue">event</span>)
                        {<br>&nbsp;&nbsp;document.<span class="jspropertycolor" style="color:black">getElementById</span>(<span
                            class="jsstringcolor" style="color:brown">"result"</span>).<span class="jspropertycolor"
                            style="color:black">innerHTML</span> += <span class="jskeywordcolor"
                            style="color:mediumblue">event</span>.<span class="jspropertycolor" style="color:black">data</span> + <span
                            class="jsstringcolor" style="color:brown">"&lt;br&gt;"</span>;<br>}; </span>
                </div>

                <p><i>Ejemplo explicado:</i></p>

                <ul class="lista">
                    <li>
                        Cree un nuevo <i>object</i> <code>EventSource</code> y especifique la URL de la página que envía las
                        actualizaciones <br> (en este ejemplo, "demo_sse.php")
                    </li>
                    <li>
                        Cada vez que se recibe una actualización, se produce el evento <code>onmessage</code>
                    </li>
                    <li>
                        Cuando ocurre un evento de mensaje, coloque los datos recibidos en el elemento con id="result"
                    </li>
                </ul>
                <hr>

                <h3>Verifique el soporte de eventos enviados por el servidor</h3>
                <p>
                    En el ejemplo de prueba anterior había algunas líneas de código adicionales para verificar la <br>
                    compatibilidad del navegador con eventos enviados por el servidor:
                </p>

                <div class="w3-code notranslate jsHigh">
                    <span class="jscolor" style="color:black">
                        <div>
                            <span class="jskeywordcolor" style="color:mediumblue">if</span>(<span class="jskeywordcolor"
                                style="color:mediumblue">typeof</span>(EventSource) !== <span class="jsstringcolor"
                                style="color:brown">"undefined"</span>) {<br><span class="jsnumbercolor" style="color:red">
                            </span> &nbsp; <span class="commentcolor" style="color:green">// Yes! Server-sent events
                                support!<br></span><span class="jsnumbercolor" style="color:red">
                            </span> &nbsp; <span class="commentcolor" style="color:green">// <i>Some code.....</i><br></span><span
                                class="jsnumbercolor" style="color:red">
                            </span> }<span class="jsnumbercolor" style="color:red">
                            </span> <span class="jskeywordcolor" style="color:mediumblue">else</span> {<br><span class="jsnumbercolor"
                                style="color:red">
                            </span> &nbsp; <span class="commentcolor" style="color:green">// Sorry! No server-sent events
                                support..<br></span><span class="jsnumbercolor" style="color:red">
                            </span> }
                        </div>
                    </span>
                </div>
                <hr>

                <h3 id="añ5">Ejemplo de código del lado del servidor</h3>
                <p>
                    Para que el ejemplo anterior funcione, necesita un servidor capaz de enviar actualizaciones de datos (como PHP o ASP).
                    <br><br> La sintaxis del flujo de eventos del lado del servidor es simple. <br> Establezca el encabezado 
                    "Content-Type" en "text/event-stream". <br> Ahora puedes comenzar a enviar transmisiones de eventos. <br><br>
                    Código en PHP (demo_sse.php):
                </p>

                <div class="w3-code notranslate htmlHigh">
                    <div>
                        <span class="phpcolor" style="color:black"><span class="phptagcolor"
                                style="color:red">&lt;?php</span><br>header(<span class="phpstringcolor"
                                style="color:brown">'Content-Type: text/event-stream'</span>);<br><span class="phpnumbercolor"
                                style="color:red">
                            </span> header(<span class="phpstringcolor" style="color:brown">'Cache-Control:
                                no-cache'</span>);<br><br>$time = date(<span class="phpstringcolor"
                                style="color:brown">'r'</span>);<br><span class="phpkeywordcolor" style="color:mediumblue">echo</span>
                            <span class="phpstringcolor" style="color:brown">"data: The server time is:
                                {$time}\n\n"</span>;<br>flush();<br><span class="phptagcolor" style="color:red">?&gt;</span></span>
                    </div>
                </div>

                <p>Código en ASP (VB) (demo_sse.asp):</p>

                <div class="w3-code notranslate spes_asp">
                    <div>
                        &lt;%<br>Response.ContentType = "text/event-stream"<br>Response.Expires = -1<br>
                        Response.Write("data: The server time is: " &amp; now())<br>Response.Flush()<br>%&gt;
                    </div>
                </div>
                <hr>
                <p><i>Código explicado</i></p>

                <ul class="lista">
                    <li>Eztablezca el encabezado "Content-Type" en "text/event-stream"</li>
                    <li>Especificar que la página no debe almacenarse en caché</li>
                    <li>Genere los datos a enviar (Comience <b>siempre</b> con "data:")</li>
                    <li>Vuelva a descargar los datos de salida a la página web</li>
                </ul>
            </article>
            <hr>

            <h2 id="añ6">El objeto <code>EventSource</code></h2>
            <p>
                En los ejemplos anteriores utilizamos el evento <code>onmessage</code> para recibir mensajes. <br>
                Pero también hay otros eventos disponibles:
            </p>

            <table class="tablecebra4blanco">
                <tr class="w3-red">
                    <th>Eventos</th>
                    <th>Descripción</th>
                </tr>
                <tr>
                    <td>onopen</td>
                    <td>Cuando se abre una conexión al servidor</td>
                </tr>
                <tr>
                    <td>onmessage</td>
                    <td>Cuando se recibe un mensaje</td>
                </tr>
                <tr>
                    <td>onerror</td>
                    <td>Cuando ocurre un error</td>
                </tr>
            </table>

        </div>

    </main>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="scriptfinal.js"></script>
    <script src="script.js"></script>
    <script src="scriptsse.js"></script>
</body>
</html>